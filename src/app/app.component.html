<div class="content-sheet" *transloco="let t">
  <h1 class="noprint">{{ t('app.description') }}</h1>
  <input class="noprint" type="checkbox" name="useRandomName" [(ngModel)]="genRandomName">
    <label class="noprint" for="useRandomName">
      {{ t('func.generateRandomName') }}
    </label>
  <div class="noprint" style="float: right;">
    <button id="reroll-button" (click)="genNewCharacter()">
      {{ t('func.reroll').toLowerCase() }}
    </button>
  </div>
  <div class="noprint" style="float: right; margin-right: 3%">
    <button id="dl-button" (click)="genPDF()">
      {{ t('func.print').toLowerCase() }}
    </button>
  </div>
  <div id="exportcontent">
    <!-- NAME -->
    <div>
      <div>
        <b>{{ t('game.name') }}: </b>
        <input type="text" id="nameSelect" [(ngModel)]="name">

      </div>

      <!-- LEVEL -->
      <div [formGroup]="characterForm">
        <b>{{ t('game.level') }}: </b>
        <select name="levelSelect" id="levelSelect"
          (ngModelChange)="genCharacter(
            character.race,
            character.characterClass,
            $event
          )"
          formControlName="levelFC"
        >
          <option *ngFor="let lvl of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15 ,16, 17, 18, 19, 20]"
            [ngValue]="lvl"
          >
            {{lvl}}
          </option>
        </select>
      </div>

      <!-- RACE -->
      <div [formGroup]="characterForm">
        <b>{{ t('game.race') }}: </b>
        <select
          name="raceSelect"
          id="raceSelect"
          (ngModelChange)="genCharacter(
            $event,
            undefined,
            character.level
          )"
          formControlName="raceFC"
        >
          <option *ngFor="let race of getRaces()"
            [ngValue]="race"
          >
            {{race.name}}
          </option>
        </select>
      </div>

      <!-- CLASS -->
      <div [formGroup]="characterForm">
        <b>{{ t('game.race') }}: </b>
        <select
          name="classSelect"
          id="classSelect"
          (ngModelChange)="genCharacter(
            character.race,
            $event,
            character.level
          )"
          formControlName="classFC"
        >
          <option *ngFor="let class of getCharacterClasses(character.race)"
            [ngValue]="class"
          >
            {{class.name}}
          </option>
        </select>
      </div>

      <!-- Attack Bonus -->
      <div>
        <b>{{ t('game.attackBonus', { IN: 'short' }) }}: </b>{{character.ab}}
      </div>

      <!-- Heath Points -->
      <div>
        <b>{{ t('game.healthPoints', { IN: 'short' }) }}: </b>{{character.hp}}
      </div>

      <!-- GOLD -->
      <div>
        <b>{{ t('game.gold') }}: </b> {{character.gold}} {{ t('game.goldPieces', { IN: 'short' }) }}
      </div>

      <!-- ABILITIES -->
      <div class="container">
        <div class="child">
          <h3>{{ t('game.abilities.self') }}</h3>
          <div>
            <b>{{ t('game.abilities.strength') }}: </b>{{character.abilities["Strength"].score}} 
            <span *ngIf="character.abilities['Strength'].mod > 0">+</span>{{character.abilities['Strength'].mod}}
          </div>
          <div>
            <b>{{ t('game.abilities.intelligence') }}: </b>{{character.abilities["Intelligence"].score}} 
            <span *ngIf="character.abilities['Intelligence'].mod > 0">+</span>{{character.abilities['Intelligence'].mod}}
          </div>
          <div>
            <b>{{ t('game.abilities.wisdom') }}: </b>{{character.abilities["Wisdom"].score}} 
            <span *ngIf="character.abilities['Wisdom'].mod > 0">+</span>{{character.abilities['Wisdom'].mod}}
          </div>
          <div>
            <b>{{ t('game.abilities.dexterity') }}: </b>{{character.abilities["Dexterity"].score}} 
            <span *ngIf="character.abilities['Dexterity'].mod > 0">+</span>{{character.abilities['Dexterity'].mod}}
          </div>
          <div>
            <b>{{ t('game.abilities.constitution') }}: </b>{{character.abilities["Constitution"].score}} 
            <span *ngIf="character.abilities['Constitution'].mod > 0">+</span>{{character.abilities['Constitution'].mod}}
          </div>
          <div>
            <b>{{ t('game.abilities.charisma') }}: </b>{{character.abilities["Charisma"].score}} 
            <span *ngIf="character.abilities['Charisma'].mod > 0">+</span>{{character.abilities['Charisma'].mod}}
          </div>
        </div>

        <!-- SAVING THROWS -->
        <div class="child" style="float:right; width:50%;">
          <h3>{{ t('game.savingThrows.self') }}</h3>
          <div>
            <b>{{ t('game.savingThrows.deathRayOrPoison') }}: </b>{{character.savingThrows["Death Ray or Poison"]}}
          </div>
          <div>
            <b>{{ t('game.savingThrows.magicWands') }}: </b>{{character.savingThrows["Magic Wands"]}}
          </div>
          <div>
            <b>{{ t('game.savingThrows.paralysisOrPetrify') }}: </b>{{character.savingThrows["Paralysis or Petrify"]}}
          </div>
          <div>
            <b>{{ t('game.savingThrows.dragonBreath') }}: </b>{{character.savingThrows["Dragon Breath"]}}
          </div>
          <div>
            <b>{{ t('game.savingThrows.spells') }}: </b>{{character.savingThrows["Spells"]}}
          </div>
        </div>
      </div>
      <br>
      <div id="optionals">
        <!-- CLASS ABILITIES -->
        <div style="clear:both" *ngIf="character.characterClass.classAbilities">
          <h3>{{ t('game.class') }} {{ t('game.abilities.self') }}</h3>
          <div *ngFor="let ability of character.characterClass.classAbilities | keyvalue">
            <b>{{ability.key}}</b>
            {{ability.value[character.level-1]}}
          </div>
        </div>

        <!-- SPELLS (checkboxes)-->
        <div
          style="clear:both"
          *ngIf="character.characterClass.spellProgression 
            && character.characterClass.spellProgression[character.level].length > 0"
        >
          <h3>{{ t('game.spells.self') }}</h3>
          <div [formGroup]="spellForm">
            <div
              formArrayName="spellArray"
              *ngFor="let spellLevel of spellForm.controls.spellArray.controls; index as i"
            >
              <b>{{ t('game.level') }} {{i+1}}</b> ({{character.characterClass.spellProgression[character.level][i]}})<br>
              <label
                for="spell-box" class="spell-label" [formArrayName]="i"
                *ngFor="let spellCheckbox of spellForm.controls.spellArray.controls[i].controls; index as j"
              >
                <input
                  name="spell-box"
                  class="spell-box"
                  type="checkbox"
                  (change)="checkSpells()"
                  [formControlName]="j"
                >
                <span class="spell-span">{{ t('game.spells.' + character.characterClass.spells[i][j].name) }}{{ character.characterClass.spells[i][j].reversible ? "*" : "" }}</span><br>
              </label>
            </div>
          </div>
        </div>

        <!-- RACE ABILITIES WEAPON RESTRICTIONS ETC -->
        <div style="clear:both">
          <h3>{{ t('game.notes') }}</h3>
          <div *ngFor="let note of character.race.specialAbilities">{{note}}</div>
          <div *ngFor="let restriction of character.race.weaponRestrictions">{{restriction}}</div>
          <div *ngFor="let restriction of character.characterClass.weaponRestrictions">{{restriction}}</div>
        </div>
      </div>
    </div>
  </div>